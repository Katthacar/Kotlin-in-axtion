<!DOCTYPE html >
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p290" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	-webkit-transform-origin: bottom left;
	-ms-transform-origin: bottom left;
	transform-origin: bottom left;
	-webkit-transform: scale(0.25);
	-ms-transform: scale(0.25);
	transform: scale(0.25);
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_290{left:703px;bottom:960px;}
#t2_290{left:314px;bottom:960px;}
#t3_290{left:156px;bottom:777px;letter-spacing:0.1px;word-spacing:7.5px;}
#t4_290{left:245px;bottom:778px;}
#t5_290{left:346px;bottom:777px;letter-spacing:0.1px;word-spacing:7.1px;}
#t6_290{left:430px;bottom:778px;letter-spacing:0.1px;}
#t7_290{left:462px;bottom:777px;letter-spacing:-0.1px;word-spacing:7.6px;}
#t8_290{left:156px;bottom:758px;}
#t9_290{left:323px;bottom:757px;letter-spacing:0.1px;word-spacing:24.5px;}
#ta_290{left:156px;bottom:738px;}
#tb_290{left:243px;bottom:738px;letter-spacing:0.1px;word-spacing:6px;}
#tc_290{left:285px;bottom:738px;letter-spacing:0.1px;}
#td_290{left:317px;bottom:738px;letter-spacing:0.1px;word-spacing:6.1px;}
#te_290{left:156px;bottom:718px;letter-spacing:0.1px;}
#tf_290{left:207px;bottom:718px;letter-spacing:-0.1px;}
#tg_290{left:232px;bottom:718px;letter-spacing:0.1px;word-spacing:4.1px;}
#th_290{left:315px;bottom:718px;letter-spacing:0.1px;}
#ti_290{left:347px;bottom:718px;letter-spacing:0.1px;word-spacing:4.2px;}
#tj_290{left:156px;bottom:698px;}
#tk_290{left:101px;bottom:663px;letter-spacing:-2px;}
#tl_290{left:156px;bottom:663px;}
#tm_290{left:156px;bottom:638px;letter-spacing:0.1px;word-spacing:4.3px;}
#tn_290{left:233px;bottom:639px;}
#to_290{left:247px;bottom:638px;letter-spacing:0.1px;word-spacing:4px;}
#tp_290{left:156px;bottom:618px;letter-spacing:0.1px;word-spacing:-0.1px;}
#tq_290{left:178px;bottom:599px;letter-spacing:0.1px;}
#tr_290{left:209px;bottom:599px;}
#ts_290{left:360px;bottom:599px;letter-spacing:0.1px;word-spacing:-1.5px;}
#tt_290{left:156px;bottom:579px;letter-spacing:0.1px;word-spacing:21.3px;}
#tu_290{left:594px;bottom:579px;}
#tv_290{left:156px;bottom:559px;letter-spacing:0.4px;}
#tw_290{left:156px;bottom:532px;letter-spacing:0.1px;}
#tx_290{left:185px;bottom:516px;letter-spacing:0.1px;word-spacing:-0.1px;}
#ty_290{left:185px;bottom:501px;letter-spacing:0.1px;word-spacing:-0.2px;}
#tz_290{left:156px;bottom:486px;}
#t10_290{left:156px;bottom:452px;letter-spacing:0.1px;word-spacing:11.9px;}
#t11_290{left:156px;bottom:432px;}
#t12_290{left:283px;bottom:432px;letter-spacing:0.1px;word-spacing:3px;}
#t13_290{left:502px;bottom:432px;letter-spacing:0.1px;}
#t14_290{left:689px;bottom:432px;letter-spacing:-0.3px;}
#t15_290{left:156px;bottom:412px;letter-spacing:0.1px;word-spacing:5.9px;}
#t16_290{left:497px;bottom:413px;}
#t17_290{left:511px;bottom:412px;letter-spacing:0.1px;word-spacing:5.9px;}
#t18_290{left:620px;bottom:412px;letter-spacing:-0.8px;}
#t19_290{left:156px;bottom:392px;letter-spacing:0.1px;}
#t1a_290{left:187px;bottom:392px;word-spacing:0.1px;}
#t1b_290{left:404px;bottom:393px;letter-spacing:0.1px;}
#t1c_290{left:461px;bottom:392px;}
#t1d_290{left:156px;bottom:365px;word-spacing:0.1px;}
#t1e_290{left:185px;bottom:350px;letter-spacing:0.1px;word-spacing:-0.2px;}
#t1f_290{left:185px;bottom:335px;letter-spacing:0.1px;}
#t1g_290{left:156px;bottom:319px;}
#t1h_290{left:156px;bottom:285px;letter-spacing:-0.1px;word-spacing:12.5px;}
#t1i_290{left:317px;bottom:286px;letter-spacing:0.1px;}
#t1j_290{left:472px;bottom:285px;letter-spacing:0.1px;word-spacing:12.3px;}
#t1k_290{left:672px;bottom:286px;}
#t1l_290{left:156px;bottom:266px;}
#t1m_290{left:248px;bottom:265px;word-spacing:3.9px;}
#t1n_290{left:156px;bottom:245px;letter-spacing:0.1px;word-spacing:-0.5px;}
#t1o_290{left:156px;bottom:225px;letter-spacing:0.1px;word-spacing:-1.6px;}
#t1p_290{left:662px;bottom:225px;letter-spacing:-0.1px;word-spacing:-1.1px;}
#t1q_290{left:156px;bottom:205px;}
#t1r_290{left:184px;bottom:205px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t1s_290{left:156px;bottom:177px;word-spacing:0.1px;}
#t1t_290{left:185px;bottom:162px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t1u_290{left:156px;bottom:147px;}
#t1v_290{left:156px;bottom:113px;letter-spacing:0.1px;word-spacing:4.4px;}
#t1w_290{left:410px;bottom:113px;}
#t1x_290{left:545px;bottom:113px;letter-spacing:0.1px;word-spacing:4.2px;}
#t1y_290{left:156px;bottom:93px;letter-spacing:0.1px;word-spacing:3.9px;}
#t1z_290{left:178px;bottom:916px;}
#t20_290{left:165px;bottom:851px;}
#t21_290{left:319px;bottom:875px;letter-spacing:0.1px;word-spacing:-0.4px;}
#t22_290{left:395px;bottom:875px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t23_290{left:319px;bottom:860px;}
#t24_290{left:460px;bottom:860px;}
#t25_290{left:464px;bottom:860px;}
#t26_290{left:609px;bottom:860px;}
#t27_290{left:319px;bottom:845px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t28_290{left:509px;bottom:845px;word-spacing:0.1px;}
#t29_290{left:623px;bottom:845px;letter-spacing:-0.2px;}
#t2a_290{left:157px;bottom:8px;}

.s1_290{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-Bold_jp;
	color: rgb(37,37,37);
}

.s2_290{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-BoldItalic_kf;
	color: rgb(101,101,101);
}

.s3_290{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(37,37,37);
}

.s4_290{
	FONT-SIZE: 57.9px;
	FONT-FAMILY: Courier_uq;
	color: rgb(37,37,37);
}

.s5_290{
	FONT-SIZE: 64.2px;
	FONT-FAMILY: FranklinGothic-DemiItal_uf;
	color: rgb(71,107,133);
}

.s6_290{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(37,37,37);
}

.s7_290{
	FONT-SIZE: 48.8px;
	FONT-FAMILY: Courier_uq;
	color: rgb(37,37,37);
}

.s8_290{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(0,28,166);
}

.s9_290{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: NewBaskerville-Italic_j9;
	color: rgb(37,37,37);
}

.sa_290{
	FONT-SIZE: 42.8px;
	FONT-FAMILY: Courier_12_;
	color: rgb(0,0,0);
}

.sb_290{
	FONT-SIZE: 48.8px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(101,101,101);
}

.sc_290{
	FONT-SIZE: 50.6px;
	FONT-FAMILY: Courier-Bold_yf;
	color: rgb(101,101,101);
}

.sd_290{
	FONT-SIZE: 61.1px;
	FONT-FAMILY: Helvetica, Arial, sans-serif;
	color: rgb(0,0,0);
	FONT-WEIGHT: bold;
}

</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts290" type="text/css" >

@font-face {
	font-family: Courier-Bold_yf;
	src: url("fonts/Courier-Bold_yf.woff") format("woff");
}

@font-face {
	font-family: Courier_12_;
	src: url("fonts/Courier_12_.woff") format("woff");
}

@font-face {
	font-family: Courier_uq;
	src: url("fonts/Courier_uq.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-DemiItal_uf;
	src: url("fonts/FranklinGothic-DemiItal_uf.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_ka;
	src: url("fonts/FranklinGothic-Demi_ka.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_kf;
	src: url("fonts/NewBaskerville-BoldItalic_kf.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_jp;
	src: url("fonts/NewBaskerville-Bold_jp.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Italic_j9;
	src: url("fonts/NewBaskerville-Italic_j9.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_ja;
	src: url("fonts/NewBaskerville-Roman_ja.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg290Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg290" style="-webkit-user-select: none;"><object width="811" height="1017" data="290/290.svg" type="image/svg+xml" id="pdf290" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div id="t1_290" class="t s1_290">263</div>
<div id="t2_290" class="t s2_290">Declaring and applying annotations</div>
<div id="t3_290" class="t s3_290">If you wrote </div>
<div id="t4_290" class="t s4_290">KClass&lt;Any&gt;</div>
<div id="t5_290" class="t s3_290">without the </div>
<div id="t6_290" class="t s4_290">out</div>
<div id="t7_290" class="t s3_290">modifier, you wouldn’t be able to pass</div>
<div id="t8_290" class="t s4_290">CompanyImpl::class</div>
<div id="t9_290" class="t s3_290">as an argument: the only allowed argument would be</div>
<div id="ta_290" class="t s4_290">Any::class</div>
<div id="tb_290" class="t s3_290">. The </div>
<div id="tc_290" class="t s4_290">out</div>
<div id="td_290" class="t s3_290">keyword specifies that you’re allowed to refer to classes that</div>
<div id="te_290" class="t s3_290">extend </div>
<div id="tf_290" class="t s4_290">Any</div>
<div id="tg_290" class="t s3_290">, not just to </div>
<div id="th_290" class="t s4_290">Any</div>
<div id="ti_290" class="t s3_290">itself. The next section shows one more annotation that</div>
<div id="tj_290" class="t s3_290">takes a reference to generic class as a parameter.</div>
<div id="tk_290" class="t s5_290">10.1.7</div>
<div id="tl_290" class="t s5_290">Generic classes as annotation parameters</div>
<div id="tm_290" class="t s3_290">By default, </div>
<div id="tn_290" class="t s6_290">JK</div>
<div id="to_290" class="t s3_290">id serializes properties of nonprimitive types as nested objects. But you</div>
<div id="tp_290" class="t s3_290">can change this behavior and provide your own serialization logic for some values.</div>
<div id="tq_290" class="t s3_290">The </div>
<div id="tr_290" class="t s4_290">@CustomSerializer</div>
<div id="ts_290" class="t s3_290">annotation takes a reference to a custom serializer class</div>
<div id="tt_290" class="t s3_290">as an argument. The serializer class should implement the </div>
<div id="tu_290" class="t s4_290">ValueSerializer</div>
<div id="tv_290" class="t s3_290">interface:</div>
<div id="tw_290" class="t s7_290">interface ValueSerializer&lt;T&gt; {</div>
<div id="tx_290" class="t s7_290">fun toJsonValue(value: T): Any?</div>
<div id="ty_290" class="t s7_290">fun fromJsonValue(jsonValue: Any?): T</div>
<div id="tz_290" class="t s7_290">}</div>
<div id="t10_290" class="t s3_290">Suppose you need to support serialization of dates, and you’ve created your own</div>
<div id="t11_290" class="t s4_290">DateSerializer</div>
<div id="t12_290" class="t s3_290">class for that, implementing the </div>
<div id="t13_290" class="t s4_290">ValueSerializer&lt;Date&gt;</div>
<div id="t14_290" class="t s3_290">inter-</div>
<div id="t15_290" class="t s3_290">face. (This class is provided as an example in the </div>
<div id="t16_290" class="t s6_290">JK</div>
<div id="t17_290" class="t s3_290">id source code: </div>
<div id="t18_290" class="t s8_290">http://mng.bz/</div>
<div id="t19_290" class="t s8_290">73a7</div>
<div id="t1a_290" class="t s3_290">). Here’s how you apply it to the </div>
<div id="t1b_290" class="t s4_290">Person</div>
<div id="t1c_290" class="t s3_290">class:</div>
<div id="t1d_290" class="t s7_290">data class Person(</div>
<div id="t1e_290" class="t s7_290">val name: String,</div>
<div id="t1f_290" class="t s7_290">@CustomSerializer(DateSerializer::class) val birthDate: Date</div>
<div id="t1g_290" class="t s7_290">)</div>
<div id="t1h_290" class="t s3_290">Now let’s see how the </div>
<div id="t1i_290" class="t s4_290">@CustomSerializer</div>
<div id="t1j_290" class="t s3_290">annotation is declared. The </div>
<div id="t1k_290" class="t s4_290">Value-</div>
<div id="t1l_290" class="t s4_290">Serializer</div>
<div id="t1m_290" class="t s3_290">class is generic and defines a type parameter, so you need to provide a</div>
<div id="t1n_290" class="t s3_290">type argument value whenever you refer to the type. Because you know nothing about</div>
<div id="t1o_290" class="t s3_290">the types of properties with which this annotation will be used, you can use a </div>
<div id="t1p_290" class="t s9_290">star projec-</div>
<div id="t1q_290" class="t s9_290">tion</div>
<div id="t1r_290" class="t s3_290">(discussed in section 9.3.6) as the argument:</div>
<div id="t1s_290" class="t s7_290">annotation class CustomSerializer(</div>
<div id="t1t_290" class="t s7_290">val serializerClass: KClass&lt;out ValueSerializer&lt;*&gt;&gt;</div>
<div id="t1u_290" class="t s7_290">)</div>
<div id="t1v_290" class="t s3_290">Figure 10.5 examines the type of the </div>
<div id="t1w_290" class="t s4_290">serializerClass</div>
<div id="t1x_290" class="t s3_290">parameter and explains its</div>
<div id="t1y_290" class="t s3_290">different parts. You need to ensure that the annotation can only refer to classes that</div>
<div id="t1z_290" class="t sa_290">KClass&lt;out Any&gt;</div>
<div id="t20_290" class="t sa_290">KClass&lt;CompanyImpl&gt;</div>
<div id="t21_290" class="t sb_290">Figure 10.4</div>
<div id="t22_290" class="t sb_290">The type of the annotation argument </div>
<div id="t23_290" class="t sc_290">CompanyImpl::class</div>
<div id="t24_290" class="t sb_290">(</div>
<div id="t25_290" class="t sc_290">KClass&lt;CompanyImpl&gt;</div>
<div id="t26_290" class="t sb_290">) is a subtype </div>
<div id="t27_290" class="t sb_290">of the annotation parameter type (</div>
<div id="t28_290" class="t sc_290">KClass&lt;out Any&gt;</div>
<div id="t29_290" class="t sb_290">).</div>
<div id="t2a_290" class="t sd_290">Licensed to Édouard WILLISSECK &lt;edouard.willisseck@gmail.com&gt;</div>

<!-- End text definitions -->


</div>
</body>
</html>

<!DOCTYPE html >
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p169" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	-webkit-transform-origin: bottom left;
	-ms-transform-origin: bottom left;
	transform-origin: bottom left;
	-webkit-transform: scale(0.25);
	-ms-transform: scale(0.25);
	transform: scale(0.25);
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_169{left:87px;bottom:960px;}
#t2_169{left:304px;bottom:961px;}
#t3_169{left:312px;bottom:962px;letter-spacing:0.1px;}
#t4_169{left:352px;bottom:961px;}
#t5_169{left:372px;bottom:960px;}
#t6_169{left:142px;bottom:772px;letter-spacing:0.1px;word-spacing:5.2px;}
#t7_169{left:272px;bottom:772px;letter-spacing:0.1px;}
#t8_169{left:312px;bottom:772px;letter-spacing:0.1px;word-spacing:4.9px;}
#t9_169{left:377px;bottom:772px;letter-spacing:0.1px;}
#ta_169{left:417px;bottom:772px;letter-spacing:0.1px;word-spacing:5.1px;}
#tb_169{left:142px;bottom:752px;letter-spacing:0.1px;word-spacing:0.1px;}
#tc_169{left:165px;bottom:732px;letter-spacing:0.1px;word-spacing:2.3px;}
#td_169{left:142px;bottom:712px;letter-spacing:0.1px;word-spacing:0.1px;}
#te_169{left:271px;bottom:712px;letter-spacing:0.1px;}
#tf_169{left:309px;bottom:712px;letter-spacing:0.1px;}
#tg_169{left:142px;bottom:642px;letter-spacing:0.1px;}
#th_169{left:172px;bottom:626px;letter-spacing:0.1px;word-spacing:-0.1px;}
#ti_169{left:172px;bottom:611px;letter-spacing:0.1px;}
#tj_169{left:142px;bottom:596px;}
#tk_169{left:142px;bottom:565px;letter-spacing:0.1px;}
#tl_169{left:142px;bottom:550px;letter-spacing:0.1px;}
#tm_169{left:172px;bottom:535px;letter-spacing:0.1px;}
#tn_169{left:142px;bottom:501px;letter-spacing:0.1px;word-spacing:4.2px;}
#to_169{left:258px;bottom:501px;}
#tp_169{left:272px;bottom:501px;letter-spacing:0.1px;}
#tq_169{left:287px;bottom:501px;letter-spacing:0.1px;}
#tr_169{left:327px;bottom:501px;letter-spacing:0.1px;word-spacing:4.3px;}
#ts_169{left:142px;bottom:481px;letter-spacing:0.1px;word-spacing:-1.5px;}
#tt_169{left:391px;bottom:481px;}
#tu_169{left:565px;bottom:481px;letter-spacing:0.1px;word-spacing:-1.2px;}
#tv_169{left:142px;bottom:461px;letter-spacing:0.1px;word-spacing:3.7px;}
#tw_169{left:142px;bottom:441px;word-spacing:6.9px;}
#tx_169{left:142px;bottom:421px;letter-spacing:-0.1px;word-spacing:0.1px;}
#ty_169{left:278px;bottom:422px;letter-spacing:-0.1px;}
#tz_169{left:312px;bottom:421px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t10_169{left:161px;bottom:390px;letter-spacing:0.1px;}
#t11_169{left:205px;bottom:389px;letter-spacing:0.1px;word-spacing:0.6px;}
#t12_169{left:161px;bottom:371px;letter-spacing:0.1px;word-spacing:4.4px;}
#t13_169{left:161px;bottom:353px;letter-spacing:0.1px;word-spacing:-0.4px;}
#t14_169{left:161px;bottom:334px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t15_169{left:142px;bottom:304px;letter-spacing:0.1px;word-spacing:4.5px;}
#t16_169{left:373px;bottom:304px;letter-spacing:0.1px;}
#t17_169{left:413px;bottom:304px;letter-spacing:0.1px;word-spacing:4.6px;}
#t18_169{left:142px;bottom:284px;letter-spacing:0.1px;word-spacing:8.5px;}
#t19_169{left:356px;bottom:284px;}
#t1a_169{left:397px;bottom:284px;word-spacing:8.7px;}
#t1b_169{left:142px;bottom:264px;letter-spacing:0.1px;word-spacing:1.4px;}
#t1c_169{left:142px;bottom:244px;letter-spacing:0.1px;word-spacing:-1.6px;}
#t1d_169{left:142px;bottom:224px;word-spacing:0.2px;}
#t1e_169{left:364px;bottom:224px;}
#t1f_169{left:403px;bottom:224px;letter-spacing:0.1px;word-spacing:-0.2px;}
#t1g_169{left:165px;bottom:204px;letter-spacing:0.1px;word-spacing:0.7px;}
#t1h_169{left:614px;bottom:205px;}
#t1i_169{left:634px;bottom:204px;letter-spacing:0.1px;}
#t1j_169{left:142px;bottom:184px;letter-spacing:0.1px;word-spacing:0.4px;}
#t1k_169{left:142px;bottom:165px;letter-spacing:0.1px;word-spacing:1.8px;}
#t1l_169{left:142px;bottom:145px;}
#t1m_169{left:200px;bottom:145px;letter-spacing:0.1px;word-spacing:5.8px;}
#t1n_169{left:367px;bottom:145px;letter-spacing:0.1px;}
#t1o_169{left:433px;bottom:145px;word-spacing:5.8px;}
#t1p_169{left:142px;bottom:125px;word-spacing:0.2px;}
#t1q_169{left:161px;bottom:670px;word-spacing:0.1px;}
#t1r_169{left:240px;bottom:670px;}
#t1s_169{left:314px;bottom:670px;letter-spacing:0.1px;}
#t1t_169{left:352px;bottom:670px;}
#t1u_169{left:421px;bottom:911px;}
#t1v_169{left:170px;bottom:880px;}
#t1w_169{left:366px;bottom:849px;}
#t1x_169{left:263px;bottom:919px;}
#t1y_169{left:264px;bottom:856px;}
#t1z_169{left:522px;bottom:868px;letter-spacing:0.1px;}
#t20_169{left:590px;bottom:868px;}
#t21_169{left:671px;bottom:868px;letter-spacing:0.1px;}
#t22_169{left:522px;bottom:852px;word-spacing:-3px;}
#t23_169{left:522px;bottom:837px;}
#t24_169{left:674px;bottom:837px;letter-spacing:0.1px;}
#t25_169{left:704px;bottom:837px;}
#t26_169{left:489px;bottom:620px;word-spacing:-0.1px;}
#t27_169{left:489px;bottom:605px;word-spacing:-0.1px;}
#t28_169{left:157px;bottom:8px;}

.s1_169{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-Bold_jp;
	color: rgb(37,37,37);
}

.s2_169{
	FONT-SIZE: 48.8px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(101,101,101);
}

.s3_169{
	FONT-SIZE: 38.9px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(101,101,101);
}

.s4_169{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-BoldItalic_kf;
	color: rgb(101,101,101);
}

.s5_169{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(37,37,37);
}

.s6_169{
	FONT-SIZE: 57.9px;
	FONT-FAMILY: Courier_uq;
	color: rgb(37,37,37);
}

.s7_169{
	FONT-SIZE: 48.8px;
	FONT-FAMILY: Courier_uq;
	color: rgb(37,37,37);
}

.s8_169{
	FONT-SIZE: 51.7px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(71,107,133);
}

.s9_169{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(37,37,37);
}

.sa_169{
	FONT-SIZE: 55px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(255,255,255);
}

.sb_169{
	FONT-SIZE: 57.2px;
	FONT-FAMILY: Courier-Bold_yf;
	color: rgb(255,255,255);
}

.sc_169{
	FONT-SIZE: 42.8px;
	FONT-FAMILY: Courier-Bold_zr;
	color: rgb(0,0,0);
}

.sd_169{
	FONT-SIZE: 42.8px;
	FONT-FAMILY: Courier_12_;
	color: rgb(0,0,0);
}

.se_169{
	FONT-SIZE: 50.6px;
	FONT-FAMILY: Courier-Bold_yf;
	color: rgb(101,101,101);
}

.sf_169{
	FONT-SIZE: 55px;
	FONT-FAMILY: Humanist521BT-BoldCondensed_vt;
	color: rgb(101,101,101);
}

.sg_169{
	FONT-SIZE: 61.1px;
	FONT-FAMILY: Helvetica, Arial, sans-serif;
	color: rgb(0,0,0);
	FONT-WEIGHT: bold;
}

</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts169" type="text/css" >

@font-face {
	font-family: Courier-Bold_yf;
	src: url("fonts/Courier-Bold_yf.woff") format("woff");
}

@font-face {
	font-family: Courier-Bold_zr;
	src: url("fonts/Courier-Bold_zr.woff") format("woff");
}

@font-face {
	font-family: Courier_12_;
	src: url("fonts/Courier_12_.woff") format("woff");
}

@font-face {
	font-family: Courier_uq;
	src: url("fonts/Courier_uq.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_ka;
	src: url("fonts/FranklinGothic-Demi_ka.woff") format("woff");
}

@font-face {
	font-family: Humanist521BT-BoldCondensed_vt;
	src: url("fonts/Humanist521BT-BoldCondensed_vt.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_kf;
	src: url("fonts/NewBaskerville-BoldItalic_kf.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_jp;
	src: url("fonts/NewBaskerville-Bold_jp.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_ja;
	src: url("fonts/NewBaskerville-Roman_ja.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg169Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg169" style="-webkit-user-select: none;"><object width="811" height="1017" data="169/169.svg" type="image/svg+xml" id="pdf169" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div id="t1_169" class="t s1_169">142</div>
<div id="t2_169" class="t s2_169">C</div>
<div id="t3_169" class="t s3_169">HAPTER</div>
<div id="t4_169" class="t s2_169">6</div>
<div id="t5_169" class="t s4_169">The Kotlin type system</div>
<div id="t6_169" class="t s5_169">any value to a non-</div>
<div id="t7_169" class="t s6_169">null</div>
<div id="t8_169" class="t s5_169">type. For </div>
<div id="t9_169" class="t s6_169">null</div>
<div id="ta_169" class="t s5_169">values, an exception is thrown. The logic is</div>
<div id="tb_169" class="t s5_169">illustrated in figure 6.5.</div>
<div id="tc_169" class="t s5_169">Here’s a trivial example of a function that uses the assertion to convert a nullable</div>
<div id="td_169" class="t s5_169">argument to a non-</div>
<div id="te_169" class="t s6_169">null</div>
<div id="tf_169" class="t s5_169">one.</div>
<div id="tg_169" class="t s7_169">fun ignoreNulls(s: String?) {</div>
<div id="th_169" class="t s7_169">val sNotNull: String = s!!</div>
<div id="ti_169" class="t s7_169">println(sNotNull.length)</div>
<div id="tj_169" class="t s7_169">}</div>
<div id="tk_169" class="t s7_169">&gt;&gt;&gt; ignoreNulls(null)</div>
<div id="tl_169" class="t s7_169">Exception in thread "main" kotlin.KotlinNullPointerException</div>
<div id="tm_169" class="t s7_169">at &lt;...&gt;.ignoreNulls(07_NotnullAssertions.kt:2)</div>
<div id="tn_169" class="t s5_169">What happens if </div>
<div id="to_169" class="t s6_169">s</div>
<div id="tp_169" class="t s5_169">is </div>
<div id="tq_169" class="t s6_169">null</div>
<div id="tr_169" class="t s5_169">in this function? Kotlin doesn’t have much choice: it will</div>
<div id="ts_169" class="t s5_169">throw an exception (a special kind of </div>
<div id="tt_169" class="t s6_169">NullPointerException</div>
<div id="tu_169" class="t s5_169">) at runtime. But note</div>
<div id="tv_169" class="t s5_169">that the place where the exception is thrown is the assertion itself, not a subsequent</div>
<div id="tw_169" class="t s5_169">line where you’re trying to use the value. Essentially, you’re telling the compiler, “I</div>
<div id="tx_169" class="t s5_169">know the value isn’t </div>
<div id="ty_169" class="t s6_169">null</div>
<div id="tz_169" class="t s5_169">, and I’m ready for an exception if it turns out I’m wrong.”</div>
<div id="t10_169" class="t s8_169">NOTE</div>
<div id="t11_169" class="t s5_169">You may notice that the double exclamation mark looks a bit rude: it’s</div>
<div id="t12_169" class="t s5_169">almost like you’re yelling at the compiler. This is intentional. The designers</div>
<div id="t13_169" class="t s5_169">of Kotlin are trying to nudge you toward a better solution that doesn’t involve</div>
<div id="t14_169" class="t s5_169">making assertions that can’t be verified by the compiler.</div>
<div id="t15_169" class="t s5_169">But there are situations when not-</div>
<div id="t16_169" class="t s6_169">null</div>
<div id="t17_169" class="t s5_169">assertions are the appropriate solution for a</div>
<div id="t18_169" class="t s5_169">problem. When you check for </div>
<div id="t19_169" class="t s6_169">null</div>
<div id="t1a_169" class="t s5_169">in one function and use the value in another</div>
<div id="t1b_169" class="t s5_169">function, the compiler can’t recognize that the use is safe. If you’re certain the check</div>
<div id="t1c_169" class="t s5_169">is always performed in another function, you may not want to duplicate it before using</div>
<div id="t1d_169" class="t s5_169">the value; then you can use a not-</div>
<div id="t1e_169" class="t s6_169">null</div>
<div id="t1f_169" class="t s5_169">assertion instead.</div>
<div id="t1g_169" class="t s5_169">This happens in practice with action classes, which appear in many </div>
<div id="t1h_169" class="t s9_169">UI</div>
<div id="t1i_169" class="t s5_169">frameworks</div>
<div id="t1j_169" class="t s5_169">such as Swing. In an action class, there are separate methods for updating the state of</div>
<div id="t1k_169" class="t s5_169">an action (to enable or disable it) and for executing it. The checks performed in the</div>
<div id="t1l_169" class="t s6_169">update</div>
<div id="t1m_169" class="t s5_169">method ensure that the </div>
<div id="t1n_169" class="t s6_169">execute</div>
<div id="t1o_169" class="t s5_169">method won’t be called if the conditions</div>
<div id="t1p_169" class="t s5_169">aren’t met, but there’s no way for the compiler to recognize that.</div>
<div id="t1q_169" class="t sa_169">Listing 6.7</div>
<div id="t1r_169" class="t sa_169">Using a not-</div>
<div id="t1s_169" class="t sb_169">null</div>
<div id="t1t_169" class="t sa_169">assertion</div>
<div id="t1u_169" class="t sc_169">foo</div>
<div id="t1v_169" class="t sc_169">foo!!</div>
<div id="t1w_169" class="t sc_169">NullPointerException</div>
<div id="t1x_169" class="t sd_169">foo != null</div>
<div id="t1y_169" class="t sd_169">foo == null</div>
<div id="t1z_169" class="t s2_169">Figure 6.5</div>
<div id="t20_169" class="t s2_169">By using a not-</div>
<div id="t21_169" class="t se_169">null</div>
<div id="t22_169" class="t s2_169">assertion, you can explicitly throw </div>
<div id="t23_169" class="t s2_169">an exception if the value is </div>
<div id="t24_169" class="t se_169">null</div>
<div id="t25_169" class="t s2_169">.</div>
<div id="t26_169" class="t sf_169">The exception </div>
<div id="t27_169" class="t sf_169">points to this line.</div>
<div id="t28_169" class="t sg_169">Licensed to Édouard WILLISSECK &lt;edouard.willisseck@gmail.com&gt;</div>

<!-- End text definitions -->


</div>
</body>
</html>

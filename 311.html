<!DOCTYPE html >
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p311" style="overflow: hidden; position: relative; background-color: white; width: 811px; height: 1017px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	-webkit-transform-origin: bottom left;
	-ms-transform-origin: bottom left;
	transform-origin: bottom left;
	-webkit-transform: scale(0.25);
	-ms-transform: scale(0.25);
	transform: scale(0.25);
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_311{left:87px;bottom:960px;}
#t2_311{left:315px;bottom:961px;}
#t3_311{left:323px;bottom:962px;letter-spacing:0.1px;}
#t4_311{left:363px;bottom:961px;letter-spacing:0.1px;}
#t5_311{left:390px;bottom:960px;}
#t6_311{left:142px;bottom:917px;word-spacing:6.2px;}
#t7_311{left:461px;bottom:918px;}
#t8_311{left:483px;bottom:917px;word-spacing:6.4px;}
#t9_311{left:142px;bottom:898px;letter-spacing:0.1px;}
#ta_311{left:231px;bottom:899px;}
#tb_311{left:256px;bottom:898px;letter-spacing:-0.2px;word-spacing:3.8px;}
#tc_311{left:326px;bottom:899px;}
#td_311{left:352px;bottom:898px;letter-spacing:0.1px;word-spacing:3.7px;}
#te_311{left:142px;bottom:879px;letter-spacing:0.1px;word-spacing:-0.6px;}
#tf_311{left:305px;bottom:879px;}
#tg_311{left:361px;bottom:879px;letter-spacing:0.1px;word-spacing:-0.8px;}
#th_311{left:632px;bottom:879px;}
#ti_311{left:658px;bottom:879px;letter-spacing:0.2px;word-spacing:-1px;}
#tj_311{left:142px;bottom:859px;letter-spacing:0.1px;word-spacing:2px;}
#tk_311{left:501px;bottom:860px;}
#tl_311{left:523px;bottom:859px;letter-spacing:0.1px;word-spacing:2.1px;}
#tm_311{left:142px;bottom:840px;letter-spacing:0.1px;word-spacing:-0.2px;}
#tn_311{left:166px;bottom:820px;letter-spacing:0.1px;word-spacing:6px;}
#to_311{left:489px;bottom:821px;}
#tp_311{left:514px;bottom:820px;letter-spacing:0.1px;word-spacing:5.7px;}
#tq_311{left:552px;bottom:820px;letter-spacing:0.1px;word-spacing:6.1px;}
#tr_311{left:672px;bottom:820px;letter-spacing:0.1px;word-spacing:6.1px;}
#ts_311{left:142px;bottom:801px;letter-spacing:0.1px;word-spacing:7.2px;}
#tt_311{left:142px;bottom:782px;letter-spacing:0.1px;}
#tu_311{left:186px;bottom:782px;}
#tv_311{left:214px;bottom:782px;letter-spacing:0.1px;word-spacing:-0.1px;}
#tw_311{left:477px;bottom:782px;letter-spacing:-0.2px;}
#tx_311{left:506px;bottom:782px;letter-spacing:0.1px;word-spacing:0.1px;}
#ty_311{left:622px;bottom:782px;}
#tz_311{left:644px;bottom:782px;letter-spacing:0.1px;}
#t10_311{left:165px;bottom:762px;letter-spacing:0.1px;word-spacing:0.1px;}
#t11_311{left:626px;bottom:763px;letter-spacing:-0.2px;}
#t12_311{left:652px;bottom:762px;letter-spacing:0.1px;word-spacing:0.2px;}
#t13_311{left:142px;bottom:743px;letter-spacing:0.1px;word-spacing:0.1px;}
#t14_311{left:142px;bottom:723px;letter-spacing:0.1px;word-spacing:0.2px;}
#t15_311{left:142px;bottom:698px;letter-spacing:0.1px;}
#t16_311{left:142px;bottom:669px;letter-spacing:0.1px;}
#t17_311{left:349px;bottom:670px;letter-spacing:-0.1px;}
#t18_311{left:393px;bottom:669px;letter-spacing:0.1px;}
#t19_311{left:142px;bottom:643px;letter-spacing:0.1px;}
#t1a_311{left:172px;bottom:628px;word-spacing:0.2px;}
#t1b_311{left:201px;bottom:613px;letter-spacing:0.1px;}
#t1c_311{left:230px;bottom:597px;letter-spacing:0.1px;}
#t1d_311{left:201px;bottom:582px;}
#t1e_311{left:172px;bottom:567px;}
#t1f_311{left:142px;bottom:536px;word-spacing:2.1px;}
#t1g_311{left:142px;bottom:517px;}
#t1h_311{left:512px;bottom:517px;}
#t1i_311{left:538px;bottom:517px;letter-spacing:0.1px;word-spacing:-0.1px;}
#t1j_311{left:87px;bottom:483px;letter-spacing:-1.9px;}
#t1k_311{left:142px;bottom:483px;letter-spacing:-0.1px;word-spacing:0.1px;}
#t1l_311{left:142px;bottom:457px;letter-spacing:0.1px;word-spacing:-0.6px;}
#t1m_311{left:288px;bottom:458px;letter-spacing:-0.2px;}
#t1n_311{left:317px;bottom:457px;letter-spacing:0.1px;word-spacing:-0.4px;}
#t1o_311{left:142px;bottom:437px;word-spacing:-0.9px;}
#t1p_311{left:430px;bottom:437px;letter-spacing:0.1px;word-spacing:-0.8px;}
#t1q_311{left:664px;bottom:437px;word-spacing:-0.8px;}
#t1r_311{left:142px;bottom:417px;letter-spacing:0.1px;word-spacing:-0.8px;}
#t1s_311{left:142px;bottom:397px;letter-spacing:0.1px;word-spacing:7.3px;}
#t1t_311{left:308px;bottom:397px;letter-spacing:0.1px;word-spacing:7.2px;}
#t1u_311{left:460px;bottom:397px;letter-spacing:0.1px;word-spacing:7.3px;}
#t1v_311{left:142px;bottom:377px;letter-spacing:0.1px;}
#t1w_311{left:188px;bottom:377px;letter-spacing:0.1px;}
#t1x_311{left:166px;bottom:357px;letter-spacing:0.1px;word-spacing:4.9px;}
#t1y_311{left:300px;bottom:357px;}
#t1z_311{left:326px;bottom:357px;letter-spacing:0.1px;word-spacing:5.1px;}
#t20_311{left:600px;bottom:357px;}
#t21_311{left:632px;bottom:357px;word-spacing:5.4px;}
#t22_311{left:142px;bottom:336px;letter-spacing:0.1px;word-spacing:-0.3px;}
#t23_311{left:142px;bottom:316px;word-spacing:2.3px;}
#t24_311{left:142px;bottom:296px;word-spacing:13.6px;}
#t25_311{left:142px;bottom:276px;letter-spacing:-0.1px;word-spacing:0.2px;}
#t26_311{left:165px;bottom:256px;letter-spacing:0.1px;word-spacing:-0.7px;}
#t27_311{left:142px;bottom:236px;word-spacing:7.2px;}
#t28_311{left:539px;bottom:236px;}
#t29_311{left:571px;bottom:236px;word-spacing:7.3px;}
#t2a_311{left:142px;bottom:215px;letter-spacing:0.1px;word-spacing:5.1px;}
#t2b_311{left:645px;bottom:216px;letter-spacing:-0.2px;}
#t2c_311{left:677px;bottom:215px;letter-spacing:0.1px;}
#t2d_311{left:142px;bottom:195px;letter-spacing:0.1px;word-spacing:-0.9px;}
#t2e_311{left:142px;bottom:175px;letter-spacing:0.1px;word-spacing:4.6px;}
#t2f_311{left:142px;bottom:155px;word-spacing:5.2px;}
#t2g_311{left:142px;bottom:135px;letter-spacing:0.1px;word-spacing:0.6px;}
#t2h_311{left:142px;bottom:115px;word-spacing:2.9px;}
#t2i_311{left:412px;bottom:115px;}
#t2j_311{left:442px;bottom:115px;letter-spacing:0.1px;word-spacing:2.8px;}
#t2k_311{left:142px;bottom:94px;letter-spacing:0.1px;word-spacing:-1px;}
#t2l_311{left:157px;bottom:8px;}

.s1_311{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-Bold_jp;
	color: rgb(37,37,37);
}

.s2_311{
	FONT-SIZE: 48.8px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(101,101,101);
}

.s3_311{
	FONT-SIZE: 38.9px;
	FONT-FAMILY: FranklinGothic-Demi_ka;
	color: rgb(101,101,101);
}

.s4_311{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-BoldItalic_kf;
	color: rgb(101,101,101);
}

.s5_311{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(37,37,37);
}

.s6_311{
	FONT-SIZE: 55px;
	FONT-FAMILY: NewBaskerville-Roman_ja;
	color: rgb(37,37,37);
}

.s7_311{
	FONT-SIZE: 60.9px;
	FONT-FAMILY: NewBaskerville-Italic_j9;
	color: rgb(37,37,37);
}

.s8_311{
	FONT-SIZE: 48.8px;
	FONT-FAMILY: Courier_uq;
	color: rgb(37,37,37);
}

.s9_311{
	FONT-SIZE: 64.2px;
	FONT-FAMILY: FranklinGothic-DemiItal_uf;
	color: rgb(71,107,133);
}

.sa_311{
	FONT-SIZE: 61.1px;
	FONT-FAMILY: Helvetica, Arial, sans-serif;
	color: rgb(0,0,0);
	FONT-WEIGHT: bold;
}

</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts311" type="text/css" >

@font-face {
	font-family: Courier_uq;
	src: url("fonts/Courier_uq.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-DemiItal_uf;
	src: url("fonts/FranklinGothic-DemiItal_uf.woff") format("woff");
}

@font-face {
	font-family: FranklinGothic-Demi_ka;
	src: url("fonts/FranklinGothic-Demi_ka.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-BoldItalic_kf;
	src: url("fonts/NewBaskerville-BoldItalic_kf.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Bold_jp;
	src: url("fonts/NewBaskerville-Bold_jp.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Italic_j9;
	src: url("fonts/NewBaskerville-Italic_j9.woff") format("woff");
}

@font-face {
	font-family: NewBaskerville-Roman_ja;
	src: url("fonts/NewBaskerville-Roman_ja.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg311Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg311" style="-webkit-user-select: none;"><object width="811" height="1017" data="311/311.svg" type="image/svg+xml" id="pdf311" style="width:811px; height:1017px; -moz-transform:scale(1); z-index: 0;"></object></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div id="t1_311" class="t s1_311">284</div>
<div id="t2_311" class="t s2_311">C</div>
<div id="t3_311" class="t s3_311">HAPTER</div>
<div id="t4_311" class="t s2_311">11</div>
<div id="t5_311" class="t s4_311">DSL construction</div>
<div id="t6_311" class="t s5_311">In this chapter, we’ll take a step beyond clean </div>
<div id="t7_311" class="t s6_311">API</div>
<div id="t8_311" class="t s5_311">s and look at Kotlin’s support for</div>
<div id="t9_311" class="t s5_311">constructing </div>
<div id="ta_311" class="t s6_311">DSL</div>
<div id="tb_311" class="t s5_311">s. Kotlin’s </div>
<div id="tc_311" class="t s6_311">DSL</div>
<div id="td_311" class="t s5_311">s build on the clean-syntax features and extend them</div>
<div id="te_311" class="t s5_311">with the ability to create </div>
<div id="tf_311" class="t s7_311">structure</div>
<div id="tg_311" class="t s5_311">out of multiple method calls. As a result, </div>
<div id="th_311" class="t s6_311">DSL</div>
<div id="ti_311" class="t s5_311">s can be</div>
<div id="tj_311" class="t s5_311">even more expressive and pleasant to work with than </div>
<div id="tk_311" class="t s6_311">API</div>
<div id="tl_311" class="t s5_311">s constructed out of individ-</div>
<div id="tm_311" class="t s5_311">ual method calls.</div>
<div id="tn_311" class="t s5_311">Just like other features of the language, Kotlin </div>
<div id="to_311" class="t s6_311">DSL</div>
<div id="tp_311" class="t s5_311">s are </div>
<div id="tq_311" class="t s7_311">fully statically typed</div>
<div id="tr_311" class="t s5_311">. This</div>
<div id="ts_311" class="t s5_311">means all the advantages of static typing, such as compile-time error detection and</div>
<div id="tt_311" class="t s5_311">better </div>
<div id="tu_311" class="t s6_311">IDE</div>
<div id="tv_311" class="t s5_311">support, remain in effect when you use </div>
<div id="tw_311" class="t s6_311">DSL</div>
<div id="tx_311" class="t s5_311">patterns for your </div>
<div id="ty_311" class="t s6_311">API</div>
<div id="tz_311" class="t s5_311">s.</div>
<div id="t10_311" class="t s5_311">As a quick taste, here are a couple of examples that show what Kotlin </div>
<div id="t11_311" class="t s6_311">DSL</div>
<div id="t12_311" class="t s5_311">s can do.</div>
<div id="t13_311" class="t s5_311">This expression goes back in time and returns the previous day (all right, just the pre-</div>
<div id="t14_311" class="t s5_311">vious date):</div>
<div id="t15_311" class="t s8_311">val yesterday = 1.days.ago</div>
<div id="t16_311" class="t s5_311">and this function generates an </div>
<div id="t17_311" class="t s6_311">HTML</div>
<div id="t18_311" class="t s5_311">table:</div>
<div id="t19_311" class="t s8_311">fun createSimpleTable() = createHTML().</div>
<div id="t1a_311" class="t s8_311">table {</div>
<div id="t1b_311" class="t s8_311">tr {</div>
<div id="t1c_311" class="t s8_311">td { +"cell" }</div>
<div id="t1d_311" class="t s8_311">}</div>
<div id="t1e_311" class="t s8_311">}</div>
<div id="t1f_311" class="t s5_311">Over the course of the chapter, you’ll learn how these examples are constructed. But</div>
<div id="t1g_311" class="t s5_311">before we begin a detailed discussion, let’s look at what </div>
<div id="t1h_311" class="t s6_311">DSL</div>
<div id="t1i_311" class="t s5_311">s are.</div>
<div id="t1j_311" class="t s9_311">11.1.1</div>
<div id="t1k_311" class="t s9_311">The concept of domain-specific languages</div>
<div id="t1l_311" class="t s5_311">The general idea of a </div>
<div id="t1m_311" class="t s6_311">DSL</div>
<div id="t1n_311" class="t s5_311">has existed for almost as long as the idea of a programming</div>
<div id="t1o_311" class="t s5_311">language. We make a distinction between a </div>
<div id="t1p_311" class="t s7_311">general-purpose programming language</div>
<div id="t1q_311" class="t s5_311">, with a</div>
<div id="t1r_311" class="t s5_311">set of capabilities complete enough to solve essentially any problem that can be solved</div>
<div id="t1s_311" class="t s5_311">with a computer; and a </div>
<div id="t1t_311" class="t s7_311">domain-specific language</div>
<div id="t1u_311" class="t s5_311">, which focuses on a specific task, or</div>
<div id="t1v_311" class="t s7_311">domain</div>
<div id="t1w_311" class="t s5_311">, and forgoes the functionality that’s irrelevant for that domain.</div>
<div id="t1x_311" class="t s5_311">The most common </div>
<div id="t1y_311" class="t s6_311">DSL</div>
<div id="t1z_311" class="t s5_311">s that you’re no doubt familiar with are </div>
<div id="t20_311" class="t s6_311">SQL</div>
<div id="t21_311" class="t s5_311">and regular</div>
<div id="t22_311" class="t s5_311">expressions. They’re great for solving the specific tasks of manipulating databases and</div>
<div id="t23_311" class="t s5_311">text strings, respectively, but you can’t use them to develop an entire application. (At</div>
<div id="t24_311" class="t s5_311">least, we hope you don’t. The idea of an entire application built in the regular-</div>
<div id="t25_311" class="t s5_311">expression language makes us shudder.)</div>
<div id="t26_311" class="t s5_311">Note how these languages can effectively accomplish their goal by reducing the set</div>
<div id="t27_311" class="t s5_311">of functionality they offer. When you need to execute an </div>
<div id="t28_311" class="t s6_311">SQL</div>
<div id="t29_311" class="t s5_311">statement, you don’t</div>
<div id="t2a_311" class="t s5_311">start by declaring a class or a function. Instead, the first keyword in every </div>
<div id="t2b_311" class="t s6_311">SQL</div>
<div id="t2c_311" class="t s5_311">state-</div>
<div id="t2d_311" class="t s5_311">ment indicates the type of operation you need to perform, and each type of operation</div>
<div id="t2e_311" class="t s5_311">has its own distinct syntax and set of keywords specific to the task at hand. With the</div>
<div id="t2f_311" class="t s5_311">regular-expression language, there’s even less syntax: the program directly describes</div>
<div id="t2g_311" class="t s5_311">the text to be matched, using compact punctuation syntax to specify how the text can</div>
<div id="t2h_311" class="t s5_311">vary. Through such a compact syntax, a </div>
<div id="t2i_311" class="t s6_311">DSL</div>
<div id="t2j_311" class="t s5_311">can express a domain-specific operation</div>
<div id="t2k_311" class="t s5_311">much more concisely than an equivalent piece of code in a general-purpose language.</div>
<div id="t2l_311" class="t sa_311">Licensed to Édouard WILLISSECK &lt;edouard.willisseck@gmail.com&gt;</div>

<!-- End text definitions -->


</div>
</body>
</html>
